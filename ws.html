<!DOCTYPE html>
<html>
<head>
	<title>ws</title>
	<script type="text/javascript" src="https://cdn.bootcss.com/require.js/2.3.5/require.min.js
"></script>

</head>
<body>
	<input type="text" name="input">
	<button type="button">submit</button>
	<p class="content"></p>
<script type="text/javascript">
	require.config({
	    baseUrl:"./js/",
	    paths: {
	        "jquery": "jquery.min",
	    }  
	});
	require(['jquery',"./client"], function($,Nes) {
	    var client = new Nes.Client('ws://localhost:1000');
		const start = async () => {
		    await client.connect();
		};
		start()
		const msg = async (data) => {
			const payload = await client.request({path: '/post',method: 'POST',payload:{name: data}});  // Can also request '/h'
		    console.log(payload)
		    return payload
		}

		client.onUpdate = (update) => {
			$('.content').text(update)
	    };
		
		$('button').on('click',async function(){
			const data = $('input').val()
			$('.content').text('正在获取')
			const name = await msg(data)
		})
	});
</script>
</body>
</html>